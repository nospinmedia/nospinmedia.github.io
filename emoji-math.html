<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>No Spin Media Emoji Math</title>
    <link rel="stylesheet" href="style.css" />
    </head>
<body>

    <div id="site-header"></div>

    <div class="container">
        <div class="main">
            <h1>No Spin Media Emoji Math</h1>
            <div id="puzzle-container"></div>
        </div>

        <div class="sidebar">
            <h2>Support Us 💙</h2>
            <p>Like what we're doing? Help keep No Spin Media running:</p>
            <p><strong>Venmo:</strong><br/>
                <a href="https://venmo.com/NoSpinMedia" target="_blank">@NoSpinMedia</a>
            </p>

            <h2>Follow Us</h2>
            <p>
                📘 <a href="https://facebook.com/NoSpinNewsAI" target="_blank">facebook.com/NoSpinNewsAI</a>
            </p>

            <h2>We ❤️ Your Thoughts!</h2>
            <p>
                Have an idea for a challenging emoji math puzzle? Want to send us general feedback or just say hi?
                We read every single message and might even publish your puzzle! 😊
            </p>
            <p>You can also reach us directly at: <strong>nospinmedia.ai@gmail.com</strong></p>

            <form id="feedbackForm">
                <input type="text" id="name" name="name" placeholder="Your first name">
                <input type="email" id="email" name="email" placeholder="you@email.com" required>
                <textarea id="message" name="message" rows="4" placeholder="Your feedback or puzzle idea..." required></textarea>
                <p id="formStatus"></p>
                <button type="submit">💬 Send Feedback</button>
            </form>
        </div>
    </div>

    <footer>
        © 2025 No Spin Media. Independent. Truth-focused.<br>Seriously factual, surprisingly fun.
    </footer>

        <script>
        async function loadPuzzles() {
            // ... (rest of loadPuzzles function) ...
        }

        function toggleAnswer(btn) {
            // ... (rest of toggleAnswer function) ...
        }

        function checkGuess(btn, correct) {
            // ... (rest of checkGuess function) ...
        }

        function sharePuzzle(postID) {
            // ... (rest of sharePuzzle function) ...
        }

        // Use DOMContentLoaded to ensure the div for the header exists before trying to fetch
        document.addEventListener('DOMContentLoaded', function() {
            fetch('header.html')
                .then(res => res.text())
                .then(html => {
                    document.getElementById('site-header').innerHTML = html;

                    // --- IMPORTANT: Hamburger JavaScript MUST be here AFTER header is loaded ---
                    const hamburger = document.getElementById('hamburger');
                    const mobileNav = document.getElementById('mobile-nav');

                    if (hamburger && mobileNav) {
                        function toggleMobileNav() {
                            mobileNav.classList.toggle('open');
                            hamburger.classList.toggle('active'); // Toggle color change
                            // >>> ADD THIS LINE: To prevent body scrolling when nav is open
                            document.body.classList.toggle('mobile-nav-active'); 
                            console.log('Hamburger toggled from emoji-math.html! Open:', mobileNav.classList.contains('open'));
                        }

                        hamburger.addEventListener('click', toggleMobileNav);

                        // Also listen for touchstart for better mobile responsiveness
                        // Use { passive: false } to allow preventDefault() for touch events
                        hamburger.addEventListener('touchstart', function(e) {
                            e.preventDefault(); // Prevents potential default browser scroll/zoom
                            console.log('Touch detected on hamburger from emoji-math.html!');
                            toggleMobileNav();
                        }, { passive: false });


                        // Close mobile menu when a link is clicked
                        mobileNav.querySelectorAll('a').forEach(link => {
                            link.addEventListener('click', () => {
                                mobileNav.classList.remove('open');
                                hamburger.classList.remove('active'); // Reset hamburger color
                                // >>> ADD THIS LINE: To re-enable body scrolling when nav closes
                                document.body.classList.remove('mobile-nav-active'); 
                            });
                        });

                        // Close mobile menu if window is resized above mobile breakpoint
                        window.addEventListener('resize', function() {
                            if (window.innerWidth > 768) {
                                mobileNav.classList.remove('open');
                                hamburger.classList.remove('active'); // Reset hamburger color
                                // >>> ADD THIS LINE: To re-enable body scrolling if window is resized past mobile breakpoint
                                document.body.classList.remove('mobile-nav-active'); 
                            }
                        });
                    } else {
                        console.error("Critical: Hamburger or mobile navigation element not found after header load!");
                    }
                    // --- END IMPORTANT SECTION ---

                    // Load puzzles AFTER the header is fully loaded and its JS is set up
                    loadPuzzles();
                })
                .catch(err => console.error("Error loading header.html:", err));

            // Feedback form submit (kept separate from header loading as it's not dependent)
            // ... (rest of feedback form code) ...
        });
    </script>
</body>
</html>
