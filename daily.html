<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8" />
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
Â  Â  <title>No Spin Media Daily Posts</title>
Â  Â  <link rel="stylesheet" href="style.css" />
Â  Â  <style>
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: Arial, sans-serif;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  background: #f4f4f4;
Â  Â  Â  Â  Â  Â  color: #222;
Â  Â  Â  Â  Â  Â  padding-top: 70px; /* match header height */
Â  Â  Â  Â  }

Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  max-width: 1200px;
Â  Â  Â  Â  Â  Â  margin: 0 auto;
Â  Â  Â  Â  Â  Â  padding: 1rem;
Â  Â  Â  Â  Â  Â  gap: 2rem;
Â  Â  Â  Â  Â  Â  flex-wrap: wrap;
Â  Â  Â  Â  }

Â  Â  Â  Â  .main { flex: 2; }
Â  Â  Â  Â  .sidebar {
Â  Â  Â  Â  Â  Â  flex: 1;
Â  Â  Â  Â  Â  Â  background: #fff;
Â  Â  Â  Â  Â  Â  padding: 1rem;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
Â  Â  Â  Â  Â  Â  height: fit-content;
Â  Â  Â  Â  Â  Â  margin-top: 0;
Â  Â  Â  Â  Â  Â  border-left: 2px solid #eee;
Â  Â  Â  Â  Â  Â  align-self: flex-start;
Â  Â  Â  Â  }

Â  Â  Â  Â  .controls { margin-bottom: 1rem; }

Â  Â  Â  Â  .date-group { margin-bottom: 2rem; }
Â  Â  Â  Â  .date-header {
Â  Â  Â  Â  Â  Â  background: #333; color: #fff;
Â  Â  Â  Â  Â  Â  padding: 0.5rem 1rem;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  font-weight: bold; font-size: 1.2rem;
Â  Â  Â  Â  }

Â  Â  Â  Â  .story-card {
Â  Â  Â  Â  Â  Â  background: #fff;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  padding: 1rem;
Â  Â  Â  Â  Â  Â  margin: 0.8rem 0;
Â  Â  Â  Â  Â  Â  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
Â  Â  Â  Â  }
Â  Â  Â  Â  .story-card h3 {
Â  Â  Â  Â  Â  Â  font-size: 1.3rem;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  }
Â  Â  Â  Â  .bias { font-size: 0.9rem; font-weight: bold; color: #666; margin-top: 0.3rem; }

Â  Â  Â  Â  .summary {
Â  Â  Â  Â  Â  Â  max-height: 0;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  transition: all 0.4s ease;
Â  Â  Â  Â  Â  Â  white-space: normal;
Â  Â  Â  Â  Â  Â  margin-top: 0.5rem;
Â  Â  Â  Â  }
Â  Â  Â  Â  .summary.show { max-height: 1000px; opacity: 1; }

Â  Â  Â  Â  button.toggle, button.share-btn {
Â  Â  Â  Â  Â  Â  margin-top: 0.6rem; padding: 6px 12px; font-size: 0.9rem; cursor: pointer;
Â  Â  Â  Â  Â  Â  border-radius: 4px; border: 1px solid #333; background: #333; color: #fff;
Â  Â  Â  Â  }
Â  Â  Â  Â  button.toggle:hover, button.share-btn:hover { background: #555; }
Â  Â  Â  Â  button.share-btn {
Â  Â  Â  Â  Â  Â  margin-left: 10px; font-size: 0.8rem;
Â  Â  Â  Â  Â  Â  background: #0066cc; border-color: #0066cc;
Â  Â  Â  Â  }
Â  Â  Â  Â  button.share-btn:hover { background: #004c99; }

Â  Â  Â  Â  #feedbackForm input, #feedbackForm textarea {
Â  Â  Â  Â  Â  Â  width: 100%; padding: 8px; margin: 6px 0;
Â  Â  Â  Â  Â  Â  border: 1px solid #ccc; border-radius: 4px;
Â  Â  Â  Â  }
Â  Â  Â  Â  #feedbackForm button {
Â  Â  Â  Â  Â  Â  background: #0073e6; color: #fff;
Â  Â  Â  Â  Â  Â  border: none; padding: 10px; width: 100%;
Â  Â  Â  Â  Â  Â  font-weight: bold; border-radius: 4px; cursor: pointer;
Â  Â  Â  Â  }
Â  Â  Â  Â  #feedbackForm button:hover { background: #005bb5; }
Â  Â  Â  Â  #formStatus {
Â  Â  Â  Â  Â  Â  font-size: 0.9em; margin: 6px 0; text-align: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  footer {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  padding: 1rem; font-size: 0.9rem; color: #666;
Â  Â  Â  Â  }

Â  Â  Â  Â  @media (max-width: 768px) {
Â  Â  Â  Â  Â  Â  .container { flex-direction: column; }
Â  Â  Â  Â  Â  Â  .sidebar {
Â  Â  Â  Â  Â  Â  Â  Â  margin-top: 1rem;
Â  Â  Â  Â  Â  Â  Â  Â  border-left: none;
Â  Â  Â  Â  Â  Â  Â  Â  border-top: 2px solid #eee;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  .nav-links { display: none; flex-direction: column; }
Â  Â  Â  Â  Â  Â  .nav-links.open { display: flex; }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>

Â  Â  <div id="site-header"></div>

Â  Â  <div class="container">
Â  Â  Â  Â  <div class="main">
Â  Â  Â  Â  Â  Â  <h1>Daily Posts</h1>

Â  Â  Â  Â  Â  Â  <div class="controls">
Â  Â  Â  Â  Â  Â  Â  Â  <label for="typeFilter">Filter by type:</label>
Â  Â  Â  Â  Â  Â  Â  Â  <select id="typeFilter">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="">All</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="movie">Movies</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="tv_show">TV Shows</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="birthday">Birthdays</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="history">History</option>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="invention">Inventions</option>
Â  Â  Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  Â  Â  Â  <input id="searchBox" type="text" placeholder="Search posts..." />
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="stories-container"></div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="sidebar">
Â  Â  Â  Â  Â  Â  <h2>Support Us ğŸ’™</h2>
Â  Â  Â  Â  Â  Â  <p>Like what we're doing? Help keep No Spin Media running:</p>
Â  Â  Â  Â  Â  Â  <p><strong>Venmo:</strong><br/>
Â  Â  Â  Â  Â  Â  Â  Â  <a href="https://venmo.com/NoSpinMedia" target="_blank">@NoSpinMedia</a>
Â  Â  Â  Â  Â  Â  </p>

Â  Â  Â  Â  Â  Â  <h2>Follow Us</h2>
Â  Â  Â  Â  Â  Â  <p>ğŸ“˜ <a href="https://facebook.com/NoSpinNewsAI" target="_blank">facebook.com/NoSpinNewsAI</a></p>

Â  Â  Â  Â  Â  Â  <h2>We â¤ï¸ Your Thoughts!</h2>
Â  Â  Â  Â  Â  Â  <p>Have an idea, suggestion, or just want to say hi? We read every single message you send. ğŸ˜Š</p>
Â  Â  Â  Â  Â  Â  <p>You can also reach us directly at: <strong>nospinmedia.ai@gmail.com</strong></p>

Â  Â  Â  Â  Â  Â  <form id="feedbackForm">
Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="name" name="name" placeholder="Your first name">
Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" id="email" name="email" placeholder="you@email.com" required>
Â  Â  Â  Â  Â  Â  Â  Â  <textarea id="message" name="message" rows="4" placeholder="Your feedback..." required></textarea>
Â  Â  Â  Â  Â  Â  Â  Â  <p id="formStatus"></p>
Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit">ğŸ’¬ Send Feedback</button>
Â  Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <footer>
Â  Â  Â  Â  Â© 2025 No Spin Media. Independent. Truth-focused.<br>Seriously factual, surprisingly fun.
Â  Â  </footer>

Â  Â  <script>
Â  Â  let storyId = null;
Â  Â  let allPosts = [];

Â  Â  function getQueryParam(param) {
Â  Â  Â  Â  const urlParams = new URLSearchParams(window.location.search);
Â  Â  Â  Â  return urlParams.get(param);
Â  Â  }

Â  Â  function formatDateLabel(dateStr) {
Â  Â  Â  Â  if (!/^\d{4}-\d{2}-\d{2}$/.test(dateStr)) return dateStr || 'Undated';
Â  Â  Â  Â  const [y,m,d] = dateStr.split('-');
Â  Â  Â  Â  const months = ["January","February","March","April","May","June","July","August","September","October","November","December"];
Â  Â  Â  Â  const weekdays = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
Â  Â  Â  Â  const fakeDate = new Date(Number(y), Number(m)-1, Number(d));
Â  Â  Â  Â  return `${weekdays[fakeDate.getDay()]}, ${months[Number(m)-1]} ${Number(d)}, ${y}`;
Â  Â  }

Â  Â  function formatCommentText(text) {
Â  Â  Â  Â  if (!text) return "";
Â  Â  Â  Â  return text
Â  Â  Â  Â  Â  Â  .replace(/\\n/g, "<br>")
Â  Â  Â  Â  Â  Â  .replace(/\n/g, "<br>")
Â  Â  Â  Â  Â  Â  .replace(/\*\*(.*?)\*\*/g, "<strong>$1</strong>");
Â  Â  }

Â  Â  async function loadStories() {
Â  Â  Â  Â  storyId = getQueryParam('id');
Â  Â  Â  Â  const apiURL = 'https://data.nospin.media/daily_posts';
Â  Â  Â  Â  const response = await fetch(apiURL);
Â  Â  Â  Â  allPosts = await response.json();
Â  Â  Â  Â  renderStories();
Â  Â  }

Â  Â  function renderStories() {
Â  Â  Â  Â  const filterType = document.getElementById('typeFilter').value.toLowerCase();
Â  Â  Â  Â  const search = document.getElementById('searchBox').value.toLowerCase();

Â  Â  Â  Â  let stories = allPosts;
Â  Â  Â  Â  if (storyId) stories = stories.filter(r => (r.fb_post_id || '').trim() === storyId);

Â  Â  Â  Â  stories = stories.filter(r =>
Â  Â  Â  Â  Â  Â  (!filterType || r.post_type.toLowerCase() === filterType) &&
Â  Â  Â  Â  Â  Â  (!search || r.headline_text.toLowerCase().includes(search) || r.comment_text.toLowerCase().includes(search))
Â  Â  Â  Â  );

Â  Â  Â  Â  stories.sort((a,b) => (a.post_date < b.post_date ? 1 : -1));

Â  Â  Â  Â  const groups = {};
Â  Â  Â  Â  stories.forEach(r => {
Â  Â  Â  Â  Â  Â  const date = r.post_date || 'Undated';
Â  Â  Â  Â  Â  Â  if (!groups[date]) groups[date] = [];
Â  Â  Â  Â  Â  Â  groups[date].push(r);
Â  Â  Â  Â  });

Â  Â  Â  Â  const container = document.getElementById('stories-container');
Â  Â  Â  Â  container.innerHTML = "";

Â  Â  Â  Â  for (const date in groups) {
Â  Â  Â  Â  Â  Â  const dateGroup = document.createElement('div');
Â  Â  Â  Â  Â  Â  dateGroup.className = 'date-group';
Â  Â  Â  Â  Â  Â  dateGroup.innerHTML = `<div class="date-header">${formatDateLabel(date)}</div>`;

Â  Â  Â  Â  Â  Â  groups[date].forEach(r => {
Â  Â  Â  Â  Â  Â  Â  Â  const card = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  card.className = 'story-card';
Â  Â  Â  Â  Â  Â  Â  Â  card.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>${r.headline_text}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="share-btn" onclick="shareStory('${r.fb_post_id}')">Share</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bias">Type: ${r.post_type}</div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="toggle" onclick="toggleSummary(this)">Show Post</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="summary"></div>
Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  card.querySelector('.summary').innerHTML = formatCommentText(r.comment_text);

Â  Â  Â  Â  Â  Â  Â  Â  if (storyId && r.fb_post_id === storyId) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const summaryEl = card.querySelector('.summary');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  summaryEl.classList.add('show');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  card.querySelector('.toggle').textContent = 'Hide Post';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  dateGroup.appendChild(card);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  container.appendChild(dateGroup);
Â  Â  Â  Â  }
Â  Â  }

Â  Â  function toggleSummary(btn) {
Â  Â  Â  Â  const summaryEl = btn.nextElementSibling;
Â  Â  Â  Â  summaryEl.classList.toggle('show');
Â  Â  Â  Â  btn.textContent = summaryEl.classList.contains('show') ? 'Hide Post' : 'Show Post';
Â  Â  }

Â  Â  function shareStory(id) {
Â  Â  Â  Â  const url = `${window.location.origin}${window.location.pathname}?id=${id}`;
Â  Â  Â  Â  navigator.clipboard.writeText(url).then(() => { alert('Share link copied to clipboard!'); });
Â  Â  }

Â  Â  document.addEventListener('DOMContentLoaded', function() {
Â  Â  Â  Â  fetch('header.html')
Â  Â  Â  Â  Â  Â  .then(res => res.text())
Â  Â  Â  Â  Â  Â  .then(html => {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('site-header').innerHTML = html;
Â  Â  Â  Â  Â  Â  Â  Â  loadStories();

Â  Â  Â  Â  Â  Â  Â  Â  // ğŸ”§ Mobile hamburger fix
Â  Â  Â  Â  Â  Â  Â  Â  const hamburger = document.querySelector('#site-header .hamburger');
Â  Â  Â  Â  Â  Â  Â  Â  const navMenu = document.querySelector('#site-header .nav-links');
Â  Â  Â  Â  Â  Â  Â  Â  if (hamburger && navMenu) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  hamburger.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  navMenu.classList.toggle('open');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  document.getElementById('typeFilter').addEventListener('change', renderStories);
Â  Â  Â  Â  document.getElementById('searchBox').addEventListener('input', renderStories);

// ğŸ”§ Feedback form submit
const feedbackForm = document.getElementById('feedbackForm');
if (feedbackForm) {
Â  Â  feedbackForm.addEventListener('submit', async function(e) {
Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  const name = document.getElementById('name').value.trim();
Â  Â  Â  Â  const email = document.getElementById('email').value.trim();
Â  Â  Â  Â  const message = document.getElementById('message').value.trim();
Â  Â  Â  Â  const formStatus = document.getElementById('formStatus');
Â  Â  Â  Â  formStatus.style.color = "black";
Â  Â  Â  Â  formStatus.textContent = "Sending...";

Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const res = await fetch("https://script.google.com/macros/s/AKfycbwr26uY61Dip94_QwzyLh1JDSIFdYHJgqL_scKGLdRd9O42VLDBvt2XzkA67tjphJrs/exec", {
Â  Â  Â  Â  Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  Â  Â  Â  Â  **headers: { "Content-Type": "text/plain" },**
Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ name, email, message, section: "Daily Posts" })
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  if (res.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  formStatus.style.color = "green";
Â  Â  Â  Â  Â  Â  Â  Â  formStatus.textContent = "âœ… Thanks for your feedback!";
Â  Â  Â  Â  Â  Â  Â  Â  feedbackForm.reset();
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  formStatus.style.color = "red";
Â  Â  Â  Â  Â  Â  Â  Â  formStatus.textContent = "âŒ Error sending feedback.";
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  Â  formStatus.style.color = "red";
Â  Â  Â  Â  Â  Â  formStatus.textContent = "âŒ Could not connect.";
Â  Â  Â  Â  }
Â  Â  });
}
Â  Â  });
Â  Â  </script>

</body>
</html>
