<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
Â  <title>No Spin Media AI Posts</title>
Â  <link rel="stylesheet" href="style.css" />
Â  <style>
Â  Â  body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f4f4f4; color: #222; }
Â  Â  .container { display: flex; max-width: 1200px; margin: 2rem auto; padding: 1rem; gap: 2rem; }
Â  Â  .main { flex: 2; }
Â  Â  .sidebar { flex: 1; background: #fff; padding: 1rem; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); height: fit-content; }

Â  Â  .filter-bar { margin-bottom: 1rem; }
Â  Â  .filter-bar select { padding: 6px 10px; font-size: 1rem; }

Â  Â  .date-group { margin-bottom: 2rem; }
Â  Â  .date-header { background: #333; color: #fff; padding: 0.5rem 1rem; border-radius: 4px; font-weight: bold; font-size: 1.2rem; }

Â  Â  .post-card { background: #fff; border-radius: 8px; padding: 1rem; margin: 0.8rem 0; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
Â  Â  .post-header { display: flex; justify-content: space-between; align-items: center; }
Â  Â  .post-header h3 { font-size: 1.3rem; margin: 0; flex: 1; }
Â  Â  .post-type { font-size: 1rem; font-weight: bold; color: #555; margin-top: 0.4rem; }

Â  Â  .comment { max-height: 0; overflow: hidden; opacity: 0; transition: all 0.4s ease; white-space: pre-line; margin-top: 0.5rem; }
Â  Â  .comment.show { max-height: 1000px; opacity: 1; }

Â  Â  button.toggle, button.share-btn {
Â  Â  Â  margin-top: 0.6rem; padding: 6px 12px; font-size: 0.9rem; cursor: pointer;
Â  Â  Â  border-radius: 4px; border: 1px solid #333; background: #333; color: #fff;
Â  Â  }
Â  Â  button.toggle:hover { background: #555; }
Â  Â  button.share-btn {
Â  Â  Â  margin-left: 10px; font-size: 0.8rem; background: #0066cc; border-color: #0066cc;
Â  Â  }
Â  Â  button.share-btn:hover { background: #004c99; }

    /* New CSS for the Quirky Feedback Form */
    .quirky-feedback-form h3 {
        color: #e60073; /* A fun, bright color */
        text-align: center;
        margin-top: 2rem;
        margin-bottom: 0.5rem;
    }
    .quirky-feedback-form p {
        font-size: 0.9rem;
        text-align: center;
        margin-bottom: 1rem;
        font-style: italic;
    }
    .quirky-feedback-form textarea {
        width: 100%;
        padding: 8px;
        margin: 6px 0;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box; /* Ensures padding doesn't affect width */
    }
    .quirky-feedback-form button {
        background: #e60073; /* Match the heading color */
        color: #fff;
        border: none;
        padding: 10px;
        width: 100%;
        font-weight: bold;
        border-radius: 4px;
        cursor: pointer;
    }
    .quirky-feedback-form button:hover {
        background: #b5005b;
    }
    .quirky-feedback-form #formStatus {
        font-size: 0.9em;
        color: green;
        margin: 6px 0;
        text-align: center;
    }
Â  </style>
Â  <script>
Â  Â  let allPosts = [];
Â  Â  let postId = null;

Â  Â  function getQueryParam(param) {
Â  Â  Â  const urlParams = new URLSearchParams(window.location.search);
Â  Â  Â  return urlParams.get(param);
Â  Â  }

Â  Â  function parseDateSafe(dateStr) {
Â  Â  Â  const parts = dateStr.split('-');
Â  Â  Â  return new Date(parts[0], parts[1]-1, parts[2]);
Â  Â  }

Â  Â  async function loadPosts() {
Â  Â  Â  postId = getQueryParam('id');
Â  Â  Â  const sheetURL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQ6MD-jJVdU22fsfcC1zu16HdCSeANVZS-Sjxf76iUcu7yCSax43w4UyDfVnQv750z_uSpjA-_pXVB_/pub?output=csv';
Â  Â  Â  const response = await fetch(sheetURL);
Â  Â  Â  const text = await response.text();

Â  Â  Â  const rows = [];
Â  Â  Â  let current = '', insideQuotes = false, row = [];
Â  Â  Â  for (let i = 0; i < text.length; i++) {
Â  Â  Â  Â  const char = text[i];
Â  Â  Â  Â  if (char === '"' && text[i+1] === '"') { current += '"'; i++; continue; }
Â  Â  Â  Â  if (char === '"') { insideQuotes = !insideQuotes; continue; }
Â  Â  Â  Â  if (char === ',' && !insideQuotes) { row.push(current); current = ''; continue; }
Â  Â  Â  Â  if ((char === '\n' || char === '\r') && !insideQuotes) {
Â  Â  Â  Â  Â  if (current || row.length) { row.push(current); rows.push(row); row = []; current = ''; }
Â  Â  Â  Â  Â  continue;
Â  Â  Â  Â  }
Â  Â  Â  Â  current += char;
Â  Â  Â  }
Â  Â  Â  if (current || row.length) { row.push(current); rows.push(row); }

Â  Â  Â  const data = rows.slice(1);
Â  Â  Â  allPosts = data.filter(r => r[0].trim() && r[1].trim());

Â  Â  Â  if (postId) {
Â  Â  Â  Â  allPosts = allPosts.filter(r => r[3].trim() === postId);
Â  Â  Â  }

Â  Â  Â  allPosts.forEach(r => {
Â  Â  Â  Â  if (!r[4] || !r[4].trim()) r[4] = 'Story';
Â  Â  Â  });

Â  Â  Â  allPosts.sort((a,b) => parseDateSafe(b[0]) - parseDateSafe(a[0]));
Â  Â  Â  renderPosts();
Â  Â  Â  populateFilter();
Â  Â  }

Â  Â  function renderPosts(filterType = 'all') {
Â  Â  Â  const container = document.getElementById('posts-container');
Â  Â  Â  container.innerHTML = '';

Â  Â  Â  const groups = {};
Â  Â  Â  allPosts.forEach(r => {
Â  Â  Â  Â  if (filterType !== 'all' && r[4].trim() !== filterType) return;
Â  Â  Â  Â  const date = r[0];
Â  Â  Â  Â  if (!groups[date]) groups[date] = [];
Â  Â  Â  Â  groups[date].push(r);
Â  Â  Â  });

Â  Â  Â  for (const date in groups) {
Â  Â  Â  Â  const dateGroup = document.createElement('div');
Â  Â  Â  Â  dateGroup.className = 'date-group';
Â  Â  Â  Â  const dateObj = parseDateSafe(date);
Â  Â  Â  Â  const formattedDate = dateObj.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
Â  Â  Â  Â  dateGroup.innerHTML = `<div class="date-header">${formattedDate}</div>`;
Â  Â  Â  Â  groups[date].forEach(r => {
Â  Â  Â  Â  Â  const post = r[1];
Â  Â  Â  Â  Â  const comment = (r[2] || '').replace(/â€” Powered by No Spin Media[\s\S]*/i, '').trim();
Â  Â  Â  Â  Â  const type = r[4] || 'Story';
Â  Â  Â  Â  Â  const id = r[3] ? r[3].trim() : '';

Â  Â  Â  Â  Â  const card = document.createElement('div');
Â  Â  Â  Â  Â  card.className = 'post-card';
Â  Â  Â  Â  Â  card.innerHTML = `
Â  Â  Â  Â  Â  Â  <div class="post-header">
Â  Â  Â  Â  Â  Â  Â  <h3>${post}</h3>
Â  Â  Â  Â  Â  Â  Â  <button class="share-btn" onclick="sharePost('${id}')">Share</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="post-type">Type: ${type}</div>
Â  Â  Â  Â  Â  Â  <button class="toggle" onclick="toggleComment(this)">Show ${type}</button>
Â  Â  Â  Â  Â  Â  <div class="comment"><strong>${type}:</strong>\n${comment}</div>
Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  if (postId && id === postId) {
Â  Â  Â  Â  Â  Â  const commentEl = card.querySelector('.comment');
Â  Â  Â  Â  Â  Â  commentEl.classList.add('show');
Â  Â  Â  Â  Â  Â  const toggleBtn = card.querySelector('.toggle');
Â  Â  Â  Â  Â  Â  toggleBtn.textContent = toggleBtn.textContent.replace('Show', 'Hide');
Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  dateGroup.appendChild(card);
Â  Â  Â  Â  });
Â  Â  Â  Â  container.appendChild(dateGroup);
Â  Â  Â  }
Â  Â  }

Â  Â  function populateFilter() {
Â  Â  Â  const types = [...new Set(allPosts.map(r => r[4].trim()))];
Â  Â  Â  const select = document.getElementById('typeFilter');
Â  Â  Â  select.innerHTML = '<option value="all">All Types</option>';
Â  Â  Â  types.forEach(t => {
Â  Â  Â  Â  const opt = document.createElement('option');
Â  Â  Â  Â  opt.value = t;
Â  Â  Â  Â  opt.textContent = t;
Â  Â  Â  Â  select.appendChild(opt);
Â  Â  Â  });
Â  Â  }

Â  Â  function toggleComment(btn) {
Â  Â  Â  const commentEl = btn.nextElementSibling;
Â  Â  Â  commentEl.classList.toggle('show');
Â  Â  Â  btn.textContent = commentEl.classList.contains('show')Â 
Â  Â  Â  Â  ? btn.textContent.replace('Show', 'Hide')Â 
Â  Â  Â  Â  : btn.textContent.replace('Hide', 'Show');
Â  Â  }

Â  Â  function sharePost(id) {
Â  Â  Â  const url = `${window.location.origin}${window.location.pathname}?id=${id}`;
Â  Â  Â  navigator.clipboard.writeText(url).then(() => {
Â  Â  Â  Â  alert('Share link copied to clipboard!');
Â  Â  Â  });
Â  Â  }

Â  Â  // NEW FUNCTION for the quirky form
    const formSubmitUrl = 'https://script.google.com/macros/s/AKfycbwr26uY61Dip94_QwzyLh1JDSIFdYHJgqL_scKGLdRd9O42VLDBvt2XzkA67tjphJrs/exec';
    
    async function submitQuirkyFeedback(e) {
        e.preventDefault();
        const form = e.target;
        const status = form.querySelector('.formStatus');
        status.textContent = "â³ Sending to the AI...";

        const data = {
            name: form.querySelector('#quirkyName').value || "Anonymous",
            email: form.querySelector('#quirkyEmail').value,
            subject: 'Quirky AI Feedback',
            message: form.querySelector('#quirkyMessage').value
        };

        try {
            const res = await fetch(formSubmitUrl, {
                method: 'POST',
                headers: {'Content-Type': 'text/plain'},
                body: JSON.stringify(data)
            });

            let result = await res.json();
            if (result.status === "success") {
                status.textContent = "âœ… The AI has received your thought-spark! Thanks!";
                form.reset();
            } else {
                status.textContent = "âŒ Hmm, the AI seems to be napping. Please try again.";
            }
            setTimeout(() => { status.textContent = ""; }, 5000);
        } catch (err) {
            status.textContent = "âŒ The connection to the AI is a little glitchy right now.";
            setTimeout(() => { status.textContent = ""; }, 5000);
        }
    }

Â  Â  window.onload = () => {
Â  Â  Â  fetch('header.html')
Â  Â  Â  Â  .then(res => res.text())
Â  Â  Â  Â  .then(html => {
Â  Â  Â  Â  Â  document.getElementById('site-header').innerHTML = html;
Â  Â  Â  Â  Â  loadPosts();
          
          // Hamburger JavaScript must be added after header is loaded
          const hamburger = document.getElementById('hamburger');
          const mobileNav = document.getElementById('mobile-nav');

          if (hamburger && mobileNav) {
            function toggleMobileNav() {
              mobileNav.classList.toggle('open');
              hamburger.classList.toggle('active');
            }
            hamburger.addEventListener('click', toggleMobileNav);
            hamburger.addEventListener('touchstart', function(e) {
                e.preventDefault();
                toggleMobileNav();
            }, { passive: false });

            mobileNav.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileNav.classList.remove('open');
                    hamburger.classList.remove('active');
                });
            });

            window.addEventListener('resize', function() {
                if (window.innerWidth > 768) {
                    mobileNav.classList.remove('open');
                    hamburger.classList.remove('active');
                }
            });
          }
          
          // Add event listener for the quirky feedback form
          const quirkyForm = document.getElementById('quirkyFeedbackForm');
          if (quirkyForm) {
            quirkyForm.addEventListener('submit', submitQuirkyFeedback);
          }
Â  Â  Â  Â  });
Â  Â  }
Â  </script>
</head>
<body>

Â  <div id="site-header"></div>

Â  <div class="container">
Â  Â  <div class="main">
Â  Â  Â  <h1>AI Generated Posts</h1>
Â  Â  Â  <div class="filter-bar">
Â  Â  Â  Â  <label for="typeFilter"><strong>Filter by Type:</strong></label>
Â  Â  Â  Â  <select id="typeFilter" onchange="renderPosts(this.value)"></select>
Â  Â  Â  </div>
Â  Â  Â  <div id="posts-container"></div>
Â  Â  </div>

Â  Â  <div class="sidebar">
Â  Â  Â  <h2>Support Us ðŸ’™</h2>
Â  Â  Â  <p>Like what we're doing? Help keep No Spin Media running:</p>
Â  Â  Â  <p><strong>Venmo:</strong><br/>
Â  Â  Â  Â  <a href="https://venmo.com/NoSpinMedia" target="_blank">@NoSpinMedia</a>
Â  Â  Â  </p>
Â  Â  Â  <h2>Follow Us</h2>
Â  Â  Â  <p>
Â  Â  Â  Â  ðŸ“˜ <a href="https://facebook.com/NoSpinNewsAI" target="_blank">facebook.com/NoSpinNewsAI</a>
Â  Â  Â  </p>
Â  Â  Â  <h2>Contact</h2>
Â  Â  Â  <p>ðŸ“¨ nospinmedia.ai@gmail.com</p>
      
      <form id="quirkyFeedbackForm" class="quirky-feedback-form">
        <h3>Got a Quirky Idea? âœ¨</h3>
        <p>Tell the AI what you'd like to see next!</p>
        <textarea id="quirkyMessage" name="message" rows="4" placeholder="Maybe a game idea? Or a fun fact? Be weird!"></textarea>
        <p class="formStatus"></p>
        <button type="submit">Send your Spark!</button>
      </form>
Â  Â  </div>
Â  </div>

Â  <footer>
Â  Â  Â© 2025 No Spin Media. Independent. Ad-free. Truth-focused.
Â  </footer>

</body>
</html>
