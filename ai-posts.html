<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
Â  <title>No Spin Media AI Posts</title>
Â  <link rel="stylesheet" href="style.css" />
Â  <script>
Â  Â  let allPosts = [];
Â  Â  let postId = null;

Â  Â  function getQueryParam(param) {
Â  Â  Â  const urlParams = new URLSearchParams(window.location.search);
Â  Â  Â  return urlParams.get(param);
Â  Â  }

Â  Â  function parseDateSafe(dateStr) {
Â  Â  Â  const parts = dateStr.split('-');
Â  Â  Â  return new Date(parts[0], parts[1]-1, parts[2]);
Â  Â  }

Â  Â  async function loadPosts() {
Â  Â  Â  postId = getQueryParam('id');
Â  Â  Â  const sheetURL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQ6MD-jJVdU22fsfcC1zu16HdCSeANVZS-Sjxf76iUcu7yCSax43w4UyDfVnQv750z_uSpjA-_pXVB_/pub?output=csv';
Â  Â  Â  const response = await fetch(sheetURL);
Â  Â  Â  const text = await response.text();

Â  Â  Â  const rows = [];
Â  Â  Â  let current = '', insideQuotes = false, row = [];
Â  Â  Â  for (let i = 0; i < text.length; i++) {
Â  Â  Â  Â  const char = text[i];
Â  Â  Â  Â  if (char === '"' && text[i+1] === '"') { current += '"'; i++; continue; }
Â  Â  Â  Â  if (char === '"') { insideQuotes = !insideQuotes; continue; }
Â  Â  Â  Â  if (char === ',' && !insideQuotes) { row.push(current); current = ''; continue; }
Â  Â  Â  Â  if ((char === '\n' || char === '\r') && !insideQuotes) {
Â  Â  Â  Â  Â  if (current || row.length) { row.push(current); rows.push(row); row = []; current = ''; }
Â  Â  Â  Â  Â  continue;
Â  Â  Â  Â  }
Â  Â  Â  Â  current += char;
Â  Â  Â  }
Â  Â  Â  if (current || row.length) { row.push(current); rows.push(row); }

Â  Â  Â  const data = rows.slice(1);
Â  Â  Â  allPosts = data.filter(r => r[0].trim() && r[1].trim());

Â  Â  Â  if (postId) {
Â  Â  Â  Â  allPosts = allPosts.filter(r => r[3].trim() === postId);
Â  Â  Â  }

Â  Â  Â  allPosts.forEach(r => {
Â  Â  Â  Â  if (!r[4] || !r[4].trim()) r[4] = 'Story';
Â  Â  Â  });

Â  Â  Â  allPosts.sort((a,b) => parseDateSafe(b[0]) - parseDateSafe(a[0]));
Â  Â  Â  renderPosts();
Â  Â  Â  populateFilter();
Â  Â  }

Â  Â  function renderPosts(filterType = 'all') {
Â  Â  Â  const container = document.getElementById('posts-container');
Â  Â  Â  container.innerHTML = '';

Â  Â  Â  const groups = {};
Â  Â  Â  allPosts.forEach(r => {
Â  Â  Â  Â  if (filterType !== 'all' && r[4].trim() !== filterType) return;
Â  Â  Â  Â  const date = r[0];
Â  Â  Â  Â  if (!groups[date]) groups[date] = [];
Â  Â  Â  Â  groups[date].push(r);
Â  Â  Â  });

Â  Â  Â  for (const date in groups) {
Â  Â  Â  Â  const dateGroup = document.createElement('div');
Â  Â  Â  Â  dateGroup.className = 'date-group';
Â  Â  Â  Â  const dateObj = parseDateSafe(date);
Â  Â  Â  Â  const formattedDate = dateObj.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
Â  Â  Â  Â  dateGroup.innerHTML = `<div class="date-header">${formattedDate}</div>`;
Â  Â  Â  Â  groups[date].forEach(r => {
Â  Â  Â  Â  Â  const post = r[1];
Â  Â  Â  Â  Â  const comment = (r[2] || '').replace(/â€” Powered by No Spin Media[\s\S]*/i, '').trim();
Â  Â  Â  Â  Â  const type = r[4] || 'Story';
Â  Â  Â  Â  Â  const id = r[3] ? r[3].trim() : '';

Â  Â  Â  Â  Â  const card = document.createElement('div');
Â  Â  Â  Â  Â  card.className = 'post-card';
Â  Â  Â  Â  Â  card.innerHTML = `
Â  Â  Â  Â  Â  Â  <div class="post-header">
Â  Â  Â  Â  Â  Â  Â  <h3>${post}</h3>
Â  Â  Â  Â  Â  Â  Â  <button class="share-btn" onclick="sharePost('${id}')">Share</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="post-type">Type: ${type}</div>
Â  Â  Â  Â  Â  Â  <button class="toggle" onclick="toggleComment(this)">Show ${type}</button>
Â  Â  Â  Â  Â  Â  <div class="comment"><strong>${type}:</strong>\n${comment}</div>
Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  if (postId && id === postId) {
Â  Â  Â  Â  Â  Â  const commentEl = card.querySelector('.comment');
Â  Â  Â  Â  Â  Â  commentEl.classList.add('show');
Â  Â  Â  Â  Â  Â  const toggleBtn = card.querySelector('.toggle');
Â  Â  Â  Â  Â  Â  toggleBtn.textContent = toggleBtn.textContent.replace('Show', 'Hide');
Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  dateGroup.appendChild(card);
Â  Â  Â  Â  });
Â  Â  Â  Â  container.appendChild(dateGroup);
Â  Â  Â  }
Â  Â  }

Â  Â  function populateFilter() {
Â  Â  Â  const types = [...new Set(allPosts.map(r => r[4].trim()))];
Â  Â  Â  const select = document.getElementById('typeFilter');
Â  Â  Â  select.innerHTML = '<option value="all">All Types</option>';
Â  Â  Â  types.forEach(t => {
Â  Â  Â  Â  const opt = document.createElement('option');
Â  Â  Â  Â  opt.value = t;
Â  Â  Â  Â  opt.textContent = t;
Â  Â  Â  Â  select.appendChild(opt);
Â  Â  Â  });
Â  Â  }

Â  Â  function toggleComment(btn) {
Â  Â  Â  const commentEl = btn.nextElementSibling;
Â  Â  Â  commentEl.classList.toggle('show');
Â  Â  Â  btn.textContent = commentEl.classList.contains('show')Â 
Â  Â  Â  Â  ? btn.textContent.replace('Show', 'Hide')Â 
Â  Â  Â  Â  : btn.textContent.replace('Hide', 'Show');
Â  Â  }

Â  Â  function sharePost(id) {
Â  Â  Â  const url = `${window.location.origin}${window.location.pathname}?id=${id}`;
Â  Â  Â  navigator.clipboard.writeText(url).then(() => {
Â  Â  Â  Â  alert('Share link copied to clipboard!');
Â  Â  Â  });
Â  Â  }

Â  Â  const formSubmitUrl = 'https://script.google.com/macros/s/AKfycbwr26uY61Dip94_QwzyLh1JDSIFdYHJgqL_scKGLdRd9O42VLDBvt2XzkA67tjphJrs/exec';
    
Â  Â  async function submitQuirkyFeedback(e) {
Â  Â  Â  e.preventDefault();
Â  Â  Â  const form = e.target;
Â  Â  Â  const status = form.querySelector('.formStatus');
Â  Â  Â  status.textContent = "â³ Sending to the AI...";

Â  Â  Â  const data = {
Â  Â  Â  Â  name: form.querySelector('#quirkyName').value || "Anonymous",
Â  Â  Â  Â  email: form.querySelector('#quirkyEmail').value,
Â  Â  Â  Â  subject: 'Quirky AI Feedback',
Â  Â  Â  Â  message: form.querySelector('#quirkyMessage').value
Â  Â  Â  };

Â  Â  Â  try {
Â  Â  Â  Â  const res = await fetch(formSubmitUrl, {
Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  headers: {'Content-Type': 'text/plain'},
Â  Â  Â  Â  Â  body: JSON.stringify(data)
Â  Â  Â  Â  });

Â  Â  Â  Â  let result = await res.json();
Â  Â  Â  Â  if (result.status === "success") {
Â  Â  Â  Â  Â  status.textContent = "âœ… The AI has received your thought-spark! Thanks!";
Â  Â  Â  Â  Â  form.reset();
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  status.textContent = "âŒ Hmm, the AI seems to be napping. Please try again.";
Â  Â  Â  Â  }
Â  Â  Â  Â  setTimeout(() => { status.textContent = ""; }, 5000);
Â  Â  Â  } catch (err) {
Â  Â  Â  Â  status.textContent = "âŒ The connection to the AI is a little glitchy right now.";
Â  Â  Â  Â  setTimeout(() => { status.textContent = ""; }, 5000);
Â  Â  Â  }
Â  Â  }

Â  Â  window.onload = () => {
Â  Â  Â  fetch('header.html')
Â  Â  Â  Â  .then(res => res.text())
Â  Â  Â  Â  .then(html => {
Â  Â  Â  Â  Â  document.getElementById('site-header').innerHTML = html;
Â  Â  Â  Â  Â  loadPosts();
          
Â  Â  Â  Â  Â  const hamburger = document.getElementById('hamburger');
Â  Â  Â  Â  Â  const mobileNav = document.getElementById('mobile-nav');

Â  Â  Â  Â  Â  if (hamburger && mobileNav) {
Â  Â  Â  Â  Â  Â  function toggleMobileNav() {
Â  Â  Â  Â  Â  Â  Â  mobileNav.classList.toggle('open');
Â  Â  Â  Â  Â  Â  Â  hamburger.classList.toggle('active');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  hamburger.addEventListener('click', toggleMobileNav);
Â  Â  Â  Â  Â  Â  hamburger.addEventListener('touchstart', function(e) {
Â  Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  Â  toggleMobileNav();
Â  Â  Â  Â  Â  Â  }, { passive: false });

Â  Â  Â  Â  Â  Â  mobileNav.querySelectorAll('a').forEach(link => {
Â  Â  Â  Â  Â  Â  Â  link.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  Â  Â  mobileNav.classList.remove('open');
Â  Â  Â  Â  Â  Â  Â  Â  hamburger.classList.remove('active');
Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  window.addEventListener('resize', function() {
Â  Â  Â  Â  Â  Â  Â  if (window.innerWidth > 768) {
Â  Â  Â  Â  Â  Â  Â  Â  mobileNav.classList.remove('open');
Â  Â  Â  Â  Â  Â  Â  Â  hamburger.classList.remove('active');
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  }
          
Â  Â  Â  Â  Â  const quirkyForm = document.getElementById('quirkyFeedbackForm');
Â  Â  Â  Â  Â  if (quirkyForm) {
Â  Â  Â  Â  Â  Â  quirkyForm.addEventListener('submit', submitQuirkyFeedback);
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  }
Â  </script>
</head>
<body>

Â  <div id="site-header"></div>

Â  <div class="container">
Â  Â  <div class="main">
Â  Â  Â  <h1>AI Generated Posts</h1>
Â  Â  Â  <div class="filter-bar">
Â  Â  Â  Â  <label for="typeFilter"><strong>Filter by Type:</strong></label>
Â  Â  Â  Â  <select id="typeFilter" onchange="renderPosts(this.value)"></select>
Â  Â  Â  </div>
Â  Â  Â  <div id="posts-container"></div>
Â  Â  </div>

Â  Â  <div class="sidebar">
Â  Â  Â  <h2>Support Us ðŸ’™</h2>
Â  Â  Â  <p>Like what we're doing? Help keep No Spin Media running:</p>
Â  Â  Â  <p><strong>Venmo:</strong><br/>
Â  Â  Â  Â  <a href="https://venmo.com/NoSpinMedia" target="_blank">@NoSpinMedia</a>
Â  Â  Â  </p>
Â  Â  Â  <h2>Follow Us</h2>
Â  Â  Â  <p>
Â  Â  Â  Â  ðŸ“˜ <a href="https://facebook.com/NoSpinNewsAI" target="_blank">facebook.com/NoSpinNewsAI</a>
Â  Â  Â  </p>
Â  Â  Â  <h2>Contact</h2>
Â  Â  Â  <p>ðŸ“¨ nospinmedia.ai@gmail.com</p>
      
Â  Â  Â  <form id="quirkyFeedbackForm" class="quirky-feedback-form">
Â  Â  Â  Â  <h3>Got a Quirky Idea? âœ¨</h3>
Â  Â  Â  Â  <p>Tell the AI what you'd like to see next!</p>
Â  Â  Â  Â  <textarea id="quirkyMessage" name="message" rows="4" placeholder="Maybe a game idea? Or a fun fact? Be weird!"></textarea>
Â  Â  Â  Â  <p class="formStatus"></p>
Â  Â  Â  Â  <button type="submit">Send your Spark!</button>
Â  Â  Â  </form>
Â  Â  </div>
Â  </div>

Â  <footer>
Â  Â  Â© 2025 No Spin Media. Independent. Ad-free. Truth-focused.
Â  </footer>

</body>
</html>
