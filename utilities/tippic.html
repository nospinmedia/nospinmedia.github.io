<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8">
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
Â  <title>Tip Calculator | No Spin Utilities</title>
Â  <link rel="stylesheet" href="../style.css">
Â  <style>
Â  Â  body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f4f4f4; color: #222; padding-top: 70px; }
Â  Â  .container { display: flex; flex-wrap: wrap; padding: 2rem; max-width: 1200px; margin: 0 auto; gap: 2rem; }
Â  Â  .main { flex: 1 1 60%; background: #fff; border-radius: 8px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.05); position: relative; }
Â  Â  .sidebar { flex: 1 1 30%; background: #fff; border-radius: 8px; padding: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.05); align-self: flex-start; }
Â  Â  h1 { font-size: 2rem; margin-top: 0; }
Â  Â  .input-row { display: flex; gap: 0.5rem; }
Â  Â  .input-col { flex: 1; }
Â  Â  label { font-weight: bold; margin-top: 0.6rem; display: block; }
Â  Â  input[type="number"], input[type="email"] { width: 100%; padding: 6px; margin-top: 4px; font-size: 16px; border: 1px solid #ccc; border-radius: 4px; }
Â  Â  .checkbox-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem; margin-top: 0.8rem; }
Â  Â  .checkbox-grid label { font-weight: normal; display: flex; align-items: center; }
Â  Â  .button-row { display: flex; gap: 0.5rem; margin-top: 1rem; }
Â  Â  .button-row button { flex: 1; }
Â  Â  button { background: #0073e6; color: #fff; border: none; padding: 10px; font-weight: bold; border-radius: 4px; cursor: pointer; }
Â  Â  button:hover { background: #005bb5; }
Â  Â  .adjust-buttons { display: flex; gap: 0.5rem; margin-top: 0.5rem; }
Â  Â  .adjust-buttons button { flex: 1; padding: 6px; font-size: 0.9rem; }
Â  Â  .clear-btn { background: #d9534f; }
Â  Â  .clear-btn:hover { background: #b52b27; }
Â  Â  .result { margin-top: 1rem; font-size: 1.1rem; background: #f9f9f9; padding: 0.8rem; border-radius: 6px; border: 1px solid #ddd; }
Â  Â  #tagline { margin-top: 0.5rem; text-align: center; font-size: 0.9rem; color: #555; }
Â  Â  #emailStatus { margin-top: 6px; color: green; font-weight: bold; font-size: 0.9rem; }
Â  Â  #version { position: absolute; bottom: 6px; right: 8px; font-size: 0.8rem; color: #999; }

Â  Â  /* Center footer */

Â  Â  footer {
Â  Â  Â  text-align: center;
Â  Â  Â  margin-top: 2rem;
Â  Â  Â  color: #555;
Â  Â  Â  font-size: 0.9rem;
Â  Â  }

Â  Â  /* Share buttons styling */
Â  Â  .share-buttons {
Â  Â  Â  display: flex;
Â  Â  Â  gap: 0.5rem;
Â  Â  Â  margin-top: 0.5rem;
Â  Â  }
Â  Â  .share-buttons button {
Â  Â  Â  flex: 1;
Â  Â  Â  background: #0073e6;
Â  Â  Â  color: #fff;
Â  Â  Â  border: none;
Â  Â  Â  padding: 8px;
Â  Â  Â  border-radius: 4px;
Â  Â  Â  font-weight: bold;
Â  Â  Â  cursor: pointer;
Â  Â  }
Â  Â  .share-buttons button:hover {
Â  Â  Â  background: #005bb5;
Â  Â  }

Â  Â  @media (max-width: 768px) { .container { flex-direction: column; } .button-row { flex-direction: column; } .adjust-buttons { flex-direction: column; } }
Â  </style>
</head>
<body>
Â  <div id="site-header"></div>

Â  <div class="container">
Â  Â  <div class="main">
Â  Â  Â  <h1>ğŸ’° Tip Calculator</h1>
Â  Â  Â  <p>Quickly calculate tips with rounding options, manual overrides, and optional email receipts.</p>

Â  Â  Â  <div class="input-row">
Â  Â  Â  Â  <div class="input-col">
Â  Â  Â  Â  Â  <label>Bill Total:</label>
Â  Â  Â  Â  Â  <input type="number" id="billTotal" placeholder="Enter total + Tax">
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="input-col">
Â  Â  Â  Â  Â  <label>Tax Total:</label>
Â  Â  Â  Â  Â  <input type="number" id="taxTotal" placeholder="Optional">
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <div class="input-row">
Â  Â  Â  Â  <div class="input-col">
Â  Â  Â  Â  Â  <label>Tip %:</label>
Â  Â  Â  Â  Â  <input type="number" id="tipPercent" value="20">
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="input-col">
Â  Â  Â  Â  Â  <label>Manual Tip:</label>
Â  Â  Â  Â  Â  <input type="number" id="manualTip" placeholder="Optional">
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <div class="checkbox-grid">
Â  Â  Â  Â  <label><input type="checkbox" id="roundUp"> Round Up</label>
Â  Â  Â  Â  <label><input type="checkbox" id="roundDown"> Round Down</label>
Â  Â  Â  Â  <label><input type="checkbox" id="exactPercent"> Exact %</label>
Â  Â  Â  Â  <label><input type="checkbox" id="excludeTax"> Exclude Tax</label>
Â  Â  Â  </div>

Â  Â  Â  <label>Your Email:</label>
Â  Â  Â  <input type="email" id="userEmail" placeholder="Enter email to receive receipt">
Â  Â  Â  <label>Attach Receipt Photo (optional):</label><input type="file" id="receiptPhoto" accept="image/*" capture="environment">

Â  Â  Â  <div class="button-row">
Â  Â  Â  Â  <button onclick="calculateTip()">Calculate Tip</button>
Â  Â  Â  Â  <button onclick="completeTip()">âœ… Complete & Email</button>
Â  Â  Â  Â  </div>

Â  Â  Â  <div class="adjust-buttons">
Â  Â  Â  Â  <button onclick="adjustTotal(0.5)">+ $0.50</button>
Â  Â  Â  Â  <button onclick="adjustTotal(-0.5)">- $0.50</button>
Â  Â  Â  Â  <button class="clear-btn" onclick="clearFields()">Clear</button>
Â  Â  Â  </div>

Â  Â  Â  <div class="result" id="result"></div>

Â  Â  Â  <!-- New Share Buttons -->
Â  Â  Â  <div class="share-buttons">
Â  Â  Â  Â  <button onclick="copyLink()">Copy Link</button>
Â  Â  Â  Â  <button onclick="sharePage()">Share with Friends</button>
Â  Â  Â  </div>

Â  Â  Â  <div id="emailStatus"></div>
Â  Â  Â  <div id="tagline"></div>
Â  Â  Â  <div id="version">v3.8</div>
Â  Â  </div>

Â  Â  <div class="sidebar">
Â  Â  Â  <h2>Support Our Utilities ğŸ’™</h2>
Â  Â  Â  <p>Like these tools? Help keep No Spin Utilities running:</p>
Â  Â  Â  <p><strong>Venmo:</strong><br/><a href="https://venmo.com/NoSpinMedia" target="_blank">@NoSpinMedia</a></p>
Â  Â  Â  <h2>Follow Us</h2>
Â  Â  Â  <p>ğŸ“˜ <a href="https://facebook.com/NoSpinNewsAI" target="_blank">facebook.com/NoSpinNewsAI</a></p>
Â  Â  Â  <h2>We â¤ï¸ Your Feedback!</h2>
Â  Â  Â  <p>Have an idea for improving this tool? We read every suggestion. ğŸ˜Š</p>
Â  Â  Â  <p>You can also reach us at: <strong>nospinmedia.ai@gmail.com</strong></p>
Â  Â  Â  <form id="feedbackForm">
Â  Â  Â  Â  <input type="text" id="name" name="name" placeholder="Your first name">
Â  Â  Â  Â  <input type="email" id="email" name="email" placeholder="you@email.com" required>
Â  Â  Â  Â  <textarea id="message" name="message" rows="4" placeholder="Your feedback..." required></textarea>
Â  Â  Â  Â  <p id="formStatus"></p>
Â  Â  Â  Â  <button type="submit">ğŸ’¬ Send Feedback</button>
Â  Â  Â  </form>
Â  Â  </div>
Â  </div>

<p style="font-size: 0.8rem; color: #888; text-align: center; max-width: 800px; margin: 2rem auto 0;">
Â  ğŸ”’ <strong>We respect your privacy.</strong> This site does not use cookies, tracking technologies, or collect personal data.
</p>

Â  <footer>Â© 2025 No Spin Media. Independent. Truth-focused.<br>Seriously factual, surprisingly fun.</footer>

Â  <script>
Â  Â  document.addEventListener('DOMContentLoaded', function() {
Â  Â  Â  fetch('../header.html').then(res => res.text()).then(html => document.getElementById('site-header').innerHTML = html);

Â  Â  Â  const savedEmail = localStorage.getItem('userEmail');
Â  Â  Â  if (savedEmail) document.getElementById('userEmail').value = savedEmail;
Â  Â  Â  document.getElementById('tipPercent').value = localStorage.getItem('tipPercent') || 20;

Â  Â  Â  ['roundUp','roundDown','exactPercent','excludeTax'].forEach(id => {
Â  Â  Â  Â  if(localStorage.getItem(id)==='true') document.getElementById(id).checked = true;
Â  Â  Â  });

Â  Â  Â  document.querySelectorAll('#roundUp,#roundDown,#exactPercent').forEach(cb=>{
Â  Â  Â  Â  cb.addEventListener('change', e=>{
Â  Â  Â  Â  Â  if(e.target.checked){
Â  Â  Â  Â  Â  Â  ['roundUp','roundDown','exactPercent'].forEach(id=>{
Â  Â  Â  Â  Â  Â  Â  if(id!==e.target.id) document.getElementById(id).checked = false;
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  Â  });

Â  Â  Â  document.getElementById('feedbackForm').addEventListener('submit', async function(e) {
Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  const status = document.getElementById('formStatus');
Â  Â  Â  Â  status.textContent = "â³ Sending...";
Â  Â  Â  Â  const data = {
Â  Â  Â  Â  Â  name: document.getElementById('name').value || "Someone",
Â  Â  Â  Â  Â  email: document.getElementById('email').value,
Â  Â  Â  Â  Â  subject: "Utilities Feedback",
Â  Â  Â  Â  Â  message: document.getElementById('message').value
Â  Â  Â  Â  };
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  const res = await fetch('https://script.google.com/macros/s/AKfycbwr26uY61Dip94_QwzyLh1JDSIFdYHJgqL_scKGLdRd9O42VLDBvt2XzkA67tjphJrs/exec', {
Â  Â  Â  Â  Â  Â  method: 'POST', headers: {'Content-Type':'text/plain'}, body: JSON.stringify(data)
Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  await res.json();
Â  Â  Â  Â  Â  status.textContent = "âœ… Thanks! Your feedback was sent."; this.reset();
Â  Â  Â  Â  Â  setTimeout(()=>{ status.textContent=""; }, 4000);
Â  Â  Â  Â  } catch(err){ status.textContent = "âŒ Failed to send!"; }
Â  Â  Â  });
Â  Â  });

Â  Â function calculateValues() {
Â  const total = parseFloat(document.getElementById('billTotal').value) || 0;
Â  const taxInput = document.getElementById('taxTotal').value.trim();
Â  const tax = taxInput==="" ? null : parseFloat(taxInput) || 0;
Â  const percent = parseFloat(document.getElementById('tipPercent').value) || 20;
Â  const manualTip = parseFloat(document.getElementById('manualTip').value);
Â  const excludeTax = document.getElementById('excludeTax').checked;

Â  // âœ… Always calculate base as pre-tax meal cost if tax is entered
Â  const base = (excludeTax && tax !== null) ? total - tax : total;

Â  let tip = !isNaN(manualTip) ? manualTip : base * (percent / 100);
Â  let finalTotal = total + tip;

Â  if(document.getElementById('roundUp').checked){ finalTotal=Math.ceil(finalTotal); tip=finalTotal-total; }
Â  if(document.getElementById('roundDown').checked){ finalTotal=Math.floor(finalTotal); tip=finalTotal-total; }

Â  const simplePercent = Math.round((tip / base) * 100);
Â  const exactPercent = (tip / base) * 100;

Â  localStorage.setItem('userEmail', document.getElementById('userEmail').value.trim());
Â  localStorage.setItem('tipPercent', percent);
Â  ['roundUp','roundDown','exactPercent','excludeTax'].forEach(id=>{
Â  Â  localStorage.setItem(id, document.getElementById(id).checked);
Â  });

Â  return { total, tax, base, tip, finalTotal, simplePercent, exactPercent };
}

Â  Â  function calculateTip() {
Â  Â  Â  const { total, tax, base, tip, finalTotal, simplePercent, exactPercent } = calculateValues();
Â  Â  Â  if(total <= 0){
Â  Â  Â  Â  document.getElementById('result').innerHTML = "âŒ Enter a Bill Total to calculate.";
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  let msg = '';
const mealCost = (tax !== null && tax <= total) ? total - tax : total;

if (tax !== null) {
Â  msg += `Meal Cost (Pre-Tax): $${mealCost.toFixed(2)}<br>`;
Â  const taxPct = (tax / mealCost) * 100;
Â  msg += `Tax: $${tax.toFixed(2)} (${taxPct.toFixed(2)}%)<br>`;
}
msg += `Bill Total: $${total.toFixed(2)}<br>`;
Â  Â  Â  const manualTip = parseFloat(document.getElementById('manualTip').value);
const tipLabel = !isNaN(manualTip) ? "Manual Tip Entered" : `${document.getElementById('tipPercent').value}% preferred`;
msg += `Tip: $${tip.toFixed(2)} (${tipLabel}, ${exactPercent.toFixed(2)}% actual)<br><br>`;
Â  Â  Â  msg += `<strong>Total with Tip: $${finalTotal.toFixed(2)}</strong>`;
Â  Â  Â  document.getElementById('result').innerHTML = msg;
Â  Â  Â  document.getElementById('emailStatus').textContent = "";
Â  Â  Â  showTagline();
Â  Â  }

Â  Â  async function completeTip() {
Â  const { total, tax, base, tip, finalTotal, simplePercent, exactPercent } = calculateValues();
Â  if (total <= 0) {
Â  Â  document.getElementById('result').innerHTML = "âŒ Enter a Bill Total before sending.";
Â  Â  return;
Â  }
Â  calculateTip();

Â  const emailField = document.getElementById('userEmail');
Â  const email = emailField.value.trim();
Â  if (!email) {
Â  Â  emailField.style.border = '2px solid red';
Â  Â  document.getElementById('emailStatus').textContent = "âŒ Enter your email to receive receipt.";
Â  Â  return;
Â  } else {
Â  Â  emailField.style.border = '';
Â  }

Â  // Build the message exactly like before
Â  let message = '';
Â  let mealCost = (tax !== null && tax <= total) ? total - tax : total;

Â  if (tax !== null) {
Â  Â  const taxPct = (tax / mealCost) * 100;
Â  Â  message += `Meal Cost (Pre-Tax): $${mealCost.toFixed(2)}\n`;
Â  Â  message += `Tax: $${tax.toFixed(2)} (${taxPct.toFixed(2)}%)\n`;
Â  } else {
Â  Â  message += `Meal Cost (Pre-Tax): $${mealCost.toFixed(2)}\n`;
Â  }

Â  message += `Bill Total: $${total.toFixed(2)}\n`;
Â  const manualTip = parseFloat(document.getElementById('manualTip').value);
Â  const tipLabel = !isNaN(manualTip) ? "Manual Tip Entered" : `${document.getElementById('tipPercent').value}% preferred`;
Â  message += `Tip: $${tip.toFixed(2)} (${tipLabel}, ${exactPercent.toFixed(2)}% actual)\n\n`;
Â  message += `Total with Tip: $${finalTotal.toFixed(2)}\n\n`;
Â  if (document.getElementById('excludeTax').checked) {
Â  Â  message += `(Tip calculated excluding tax)\n`;
Â  }
Â  message += getRandomTagline();

Â  // ğŸ”¹ NEW: Optional image handling (safe; wonâ€™t break old behavior)
Â  const fileInput = document.getElementById('receiptPhoto');
Â  let imageBase64; // undefined unless a file is chosen

Â  if (fileInput && fileInput.files && fileInput.files.length > 0) {
Â  Â  const file = fileInput.files[0];

Â  Â  // Read as DataURL, then strip the "data:...;base64," prefix
Â  Â  imageBase64 = await new Promise((resolve, reject) => {
Â  Â  Â  const reader = new FileReader();
Â  Â  Â  reader.onload = () => {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  const result = reader.result || '';
Â  Â  Â  Â  Â  const base64Only = String(result).includes(',') ? result.split(',')[1] : result;
Â  Â  Â  Â  Â  resolve(base64Only);
Â  Â  Â  Â  } catch (e) { resolve(undefined); }
Â  Â  Â  };
Â  Â  Â  reader.onerror = () => resolve(undefined);
Â  Â  Â  reader.readAsDataURL(file);
Â  Â  });
Â  }

Â  // Build payload (only add imageBase64 if present)
Â  const payload = {
Â  Â  name: "No Spin Utilities",
Â  Â  email: email,
Â  Â  subject: "Your Tip Calculator Receipt",
Â  Â  message
Â  };
Â  if (imageBase64) payload.imageBase64 = imageBase64;

Â  await fetch('https://script.google.com/macros/s/AKfycbwRMD0KhGcv8YGo-GFw2onU5PYldc19J50uGCqRuxbA2wSTj2y8uNZaBnp-DrbHr_rNjQ/exec', {
Â  Â  method: 'POST',
Â  Â  headers: { 'Content-Type': 'text/plain' },
Â  Â  body: JSON.stringify(payload)
Â  });

Â  document.getElementById('emailStatus').textContent = "âœ… Receipt sent to " + email;
}

Â  Â  function adjustTotal(amount) {
Â  Â  Â  const bill = document.getElementById('billTotal');
Â  Â  Â  bill.value = (parseFloat(bill.value)||0) + amount;
Â  Â  Â  calculateTip();
Â  Â  }

Â  Â  function clearFields() {
Â  Â  Â  document.getElementById('billTotal').value='';
Â  Â  Â  document.getElementById('taxTotal').value='';
Â  Â  Â  document.getElementById('manualTip').value='';
Â  Â  Â  document.getElementById('result').innerHTML='';
Â  Â  Â  document.getElementById('emailStatus').textContent='';
Â  Â  Â  document.getElementById('tagline').textContent='';
Â  Â  }

Â  Â  function getRandomTagline(){
Â  Â  Â  const tags=[
Â  Â  Â  Â  "Thank you for using No Spin Utilities!",
Â  Â  Â  Â  "If you enjoyed this, share it with friends!",
Â  Â  Â  Â  "Your support keeps our tools free & fun!",
Â  Â  Â  Â  "Check out our other utilities at No Spin Media!",
Â  Â  Â  Â  "Made with â¤ï¸ for honest, simple tools.",
Â  Â  Â  Â  "Try our new tip calculator. Figure out your tips easily. https://nospin.media/utilities/tip.html"
Â  Â  Â  ];
Â  Â  Â  return tags[Math.floor(Math.random()*tags.length)] + "\n\nCheck out our other utilities:\nhttps://nospin.media/utilities/index.html";
Â  Â  }

Â  Â  function showTagline(){ document.getElementById('tagline').textContent = getRandomTagline().split("\n")[0]; }

Â  Â  // New functions for sharing
Â  Â  function copyLink() {
Â  Â  Â  document.execCommand('copy'); // Use document.execCommand('copy') for clipboard in iframes
Â  Â  Â  const tempInput = document.createElement('input');
Â  Â  Â  tempInput.value = window.location.href;
Â  Â  Â  document.body.appendChild(tempInput);
Â  Â  Â  tempInput.select();
Â  Â  Â  document.execCommand('copy');
Â  Â  Â  document.body.removeChild(tempInput);
Â  Â  Â  alertBox("âœ… Link copied to clipboard!"); // Changed alert to custom alertBox
Â  Â  }

Â  Â  function sharePage() {
Â  Â  Â  if (navigator.share) {
Â  Â  Â  Â  navigator.share({
Â  Â  Â  Â  Â  title: "Tip Calculator",
Â  Â  Â  Â  Â  text: "Check out this Tip Calculator!",
Â  Â  Â  Â  Â  url: window.location.href
Â  Â  Â  Â  });
Â  Â  Â  } else {
Â  Â  Â  Â  copyLink();
Â  Â  Â  }
Â  Â  }

Â  Â  // Custom alert box function
Â  Â  function alertBox(message) {
Â  Â  Â  const alertDiv = document.createElement('div');
Â  Â  Â  alertDiv.style.cssText = `
Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  top: 50%;
Â  Â  Â  Â  left: 50%;
Â  Â  Â  Â  transform: translate(-50%, -50%);
Â  Â  Â  Â  background-color: rgba(0, 0, 0, 0.7);
Â  Â  Â  Â  color: white;
Â  Â  Â  Â  padding: 15px 25px;
Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  z-index: 1000;
Â  Â  Â  Â  font-size: 1.1rem;
Â  Â  Â  Â  text-align: center;
Â  Â  Â  `;
Â  Â  Â  alertDiv.textContent = message;
Â  Â  Â  document.body.appendChild(alertDiv);
Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  alertDiv.remove();
Â  Â  Â  }, 2000);
Â  Â  }
Â  </script>
</body>
</html>
