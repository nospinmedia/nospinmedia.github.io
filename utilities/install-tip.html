<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Install the Tip Calculator | No Spin Media</title>

  <!-- Use your site styles if present; inline styles provide fallback -->
  <link rel="stylesheet" href="style.css" />

  <style>
    :root { --bg:#f7f7f7; --card:#fff; --text:#222; --muted:#666; --brand:#111; }
    @media (prefers-color-scheme: dark){
      :root { --bg:#111; --card:#1a1a1a; --text:#eee; --muted:#aaa; --brand:#fff; }
    }
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;line-height:1.55}
    /* Header (matches site look; works even if style.css missing) */
    header{
      background:#111;color:#fff;position:sticky;top:0;z-index:10;
      display:flex;align-items:center;justify-content:space-between;
      padding:.6rem 1rem;min-height:70px
    }
    .brand{display:flex;align-items:center;gap:.6rem;text-decoration:none;color:#fff}
    .brand img{height:36px}
    nav a{color:#fff;text-decoration:none;margin-left:18px;font-weight:600;white-space:nowrap}
    nav{overflow:auto;white-space:nowrap}
    /* Page body */
    .wrap{max-width:820px;margin:1.25rem auto;padding:0 1rem}
    .card{background:var(--card);border-radius:14px;box-shadow:0 2px 10px rgba(0,0,0,.06);padding:1.2rem;margin-bottom:1rem}
    h1{margin:.25rem 0 0;font-size:1.35rem}
    h2{margin:0 0 .5rem;font-size:1.1rem}
    ol{margin:.35rem 0 0 1.2rem}
    .tip{font-size:.95rem;color:var(--muted);margin-top:.6rem}
    .badge{display:inline-block;background:#eef;border-radius:999px;padding:.25rem .6rem;font-size:.85rem;color:#223}
    .cta{display:inline-block;border:1px solid #ccc;border-radius:10px;padding:.6rem .9rem;font-weight:600;text-decoration:none;color:var(--text);margin-top:.5rem}
    .cta.primary{border-color:#111;background:#111;color:#fff}
    .hide{display:none}
    .row{display:flex;gap:1rem;flex-wrap:wrap}
    .row .card{flex:1 1 300px}
    .foot{font-size:.9rem;color:var(--muted);margin-top:1rem}
    .center{display:flex;align-items:center;gap:.5rem}
    .list ul{margin:.35rem 0 0 1.1rem}
  </style>
</head>
<body>
  <!-- Header with logo + nav -->
  <header>
    <a class="brand" href="/"><img src="logo.png" alt="No Spin Media" onerror="this.style.display='none'"><span>No Spin Media</span></a>
    <nav>
      <a href="/">Home</a>
      <a href="/news.html">News</a>
      <a href="/emoji-puzzles.html">Emoji Puzzles</a>
      <a href="/emoji-math.html">Emoji Math</a>
      <a href="/ai-posts.html">AI Posts</a>
      <a href="/games.html">Games</a>
      <a href="/utilities.html">Utilities</a>
      <a href="/support.html">Support</a>
      <a href="/ai.html">Why AI?</a>
      <a href="https://www.facebook.com/NoSpinNewsAI">Facebook</a>
    </nav>
  </header>

  <div class="wrap">
    <div class="card">
      <h1>Install the Tip Calculator</h1>
      <div class="tip">Optional, fast, and works offline. No changes happen unless you tap “Install” on your phone.</div>
    </div>

    <!-- Smart notices injected by JS -->
    <div id="notice" class="card hide"></div>

    <div class="row">
      <!-- iPhone / iPad steps -->
      <section id="ios" class="card hide">
        <h2>For iPhone / iPad (Safari)</h2>
        <div class="badge">Manual steps (Apple requires Safari)</div>
        <ol>
          <li>Open <strong>Safari</strong> on your iPhone or iPad.</li>
          <li>Go to <strong>nospin.media/tip</strong>.</li>
          <li>Tap the <strong>Share</strong> button (square with ↑).</li>
          <li>Choose <strong>Add to Home Screen</strong>.</li>
          <li>Tap <strong>Add</strong>.</li>
        </ol>
        <p class="tip">If you’re in another browser, first open this page in Safari, then follow the steps.</p>
        <a id="openSafari" class="cta" href="#">Open in Safari</a>
      </section>

      <!-- Android steps -->
      <section id="android" class="card hide">
        <h2>For Android</h2>
        <div class="badge">One‑tap prompt in Chrome/Edge</div>
        <ol>
          <li>Open <strong>Chrome</strong> on your phone.</li>
          <li>Go to <strong>nospin.media/tip</strong>.</li>
          <li>Tap the <strong>⋮ menu</strong> (three dots, top‑right).</li>
          <li>Choose <strong>Install app</strong> (or <strong>Add to Home Screen</strong>).</li>
          <li>Confirm to add it.</li>
        </ol>
        <button id="installBtn" class="cta primary hide">Install App</button>
        <p class="tip">Sometimes Chrome also shows an install banner automatically at the bottom. If you don’t see either, the menu option above always works.</p>
      </section>
    </div>

    <div class="card list">
      <h2>What happens when you install?</h2>
      <ul>
        <li>It appears on your home screen like an app.</li>
        <li>Opens full‑screen and works offline (email receipts send when back online).</li>
        <li>Nothing sneaky—this is 100% optional and user‑initiated.</li>
      </ul>
      <a class="cta" href="https://nospin.media/utilities/tip.html">Open the Tip Calculator</a>
    </div>

    <div class="foot">Guide v1.1 • This page won’t change your device without your action.</div>
  </div>

  <script>
    (function(){
      const ua = navigator.userAgent || "";
      const isIOS = /iPad|iPhone|iPod/.test(ua) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
      const isSafari = /^((?!chrome|android).)*safari/i.test(ua);
      const isAndroid = /Android/i.test(ua);
      const isChromeLike = /Chrome\/|CriOS\//.test(ua); // Chrome or Chrome-based
      const notice = document.getElementById("notice");
      const iosBox = document.getElementById("ios");
      const androidBox = document.getElementById("android");
      const installBtn = document.getElementById("installBtn");
      const openSafari = document.getElementById("openSafari");

      // Show appropriate sections
      if (isIOS){
        iosBox.classList.remove("hide");
        if (!isSafari){
          notice.classList.remove("hide");
          notice.innerHTML = `
            <div class="center">
              <strong>Heads up:</strong>
              <span>On iPhone, Apple only allows “Add to Home Screen” in <em>Safari</em>.</span>
            </div>`;
        }
      } else if (isAndroid){
        androidBox.classList.remove("hide");
      } else {
        // Desktop fallback: show both
        iosBox.classList.remove("hide");
        androidBox.classList.remove("hide");
      }

      // Open this guide in Safari (best-effort; still user-controlled)
      openSafari?.addEventListener("click", (e)=>{
        e.preventDefault();
        const url = location.href.replace(/^http:/, "https:");
        location.href = url;
      });

      // Android PWA install button (transparent, user‑initiated)
      let deferredPrompt = null;
      window.addEventListener("beforeinstallprompt", (e) => {
        if (isAndroid && isChromeLike){
          e.preventDefault();
          deferredPrompt = e;
          installBtn.classList.remove("hide");
        }
      });

      installBtn?.addEventListener("click", async ()=>{
        if (!deferredPrompt) return;
        deferredPrompt.prompt();
        await deferredPrompt.userChoice;
        deferredPrompt = null;
        installBtn.classList.add("hide");
      });
    })();
  </script>
</body>
</html>
